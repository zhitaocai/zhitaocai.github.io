title: 【Android单元测试系列】一、单元测试&&Junit
tags:
  - Android
  - Junit
categories:
  - Android开发df
  - Android测试

description: 【Android单元测试系列】一、单元测试&&Junit
date: 2015-07-06 19:49:51

---

本文开始将正式开始叙述Android && Junit测试相关知识。

<!--more-->

# 什么是 JUnit
JUnit 是采用测试驱动开发的方式，也就是说在开发前先写好测试代码，主要用来说明被测试的代码会被如何使用，错误处理等；然后开始写代码，并在测试代码中逐步测试这些代码，直到最后在测试代码中完全通过。


# JUnit 的 4 大功能
1. **管理测试用例**：修改了哪些代码，这些代码的修改会对哪些部分有影响，通过 JUnit 将这次的修改做个完整测试。这也就 JUnit 中所谓的 TestSuite。
2. **定义测试代码**：这也就是 JUnit 中所谓的 TestCase，根据源代码的测试需要定义每个TestCase，并将 TestCase 添加到相应的 TestSuite 方便管理。
3. **定义测试环境**：在 TestCase 测试前会先调用“环境”配置，在测试中使用，当然也可以在测试用例中直接定义测试环境。
4. **检测测试结果**：对于每种正常、异常情况下的测试，运行结果是什么、结果是否是我们预期的等都需要有个明确的定义，JUnit 在这方面提供了强大的功能。

# 为什么需要单元测试
1. Android应用程序运行在各种设备上，有限的内存、CPU功率、电源、网络连接、系统版本号等等，都需要一个合理的测试覆盖率来帮助您增强和维护Android应用程序。
2. 目前移动开发app生命周期短，迭代速度快，如果缺乏一个系统的测试，稍有不慎可能会因为新增了新功能而导致低版本现有的功能出现bug等等。
3. **对于程序员来说：学会编写单元测试对代码设计有十分大的帮助**
4. ...

**等等，为什么上面说的是JUnit，而这里又说Android呢？那是因为Android的测试类是基于Junit3来进行扩展编写的，因此我们有必要了解Junit3 、Junit4的相关知识。**


# 什么时候写单元测试
> JUnit 是采用测试驱动开发的方式，也就是说在开发前先写好测试代码，主要用来说明被测试的代码会被如何使用，错误处理等；然后开始写代码，并在测试代码中逐步测试这些代码，直到最后在测试代码中完全通过。

> 看了是否感觉有些不符合程序员的思维习惯（先写代码然后在调试），的确这也是JUnit 是对程序员思维习惯的“颠覆”。在这里我自己也感觉，好像很 难做到，为什么？在一匹“马”没有完全设计好前，怎么规定这匹“马”将来会如何跑？而且即使把“马”将来会如何“跑”定义好了，在实现的时候“马”被改变 了怎么办？

> 说到这里，我就说明下，我自己对 JUnit “错误”的使用方法，这也许与 JUnit 测试驱动开发的目的相矛盾，但是的确可以有效地减少 bug。JUnit 从核心来说就是将源代码与测试代码完全分开，将测试代码作为一个单独的程序。前面介绍的方法，都将源代码与 测试代码合为一体，由于源代码的重要性大于测试代码的重要性，所以测试代码经常有不完整、结构不清晰等问题，这样程序员的单元测试也就不完整。JUnit 就是被我用来做完整的单元测试，对当前的部分代码，测试其在每种“环境”下的运行结果。

总结下来：**单元测试需要在开发前写好测试代码**，听起来已经够怪异了，但是经过实际使用后，发现确实需要做到这点才能真正的用好测试，另外估计你已经从这句话里面猜到究竟是谁写单元测试了，没错，就是**写代码的你**~~

# Junit 运作模式

**TestCase -> TestSuite -> TestRunner =====> TestResult**

1. 我们需要为每个类写测试用例(**TestCase**)，比如：各种食物的保质期测试用例
2. 然后通过不同的容器（**TestSuite**）将这些类分别组织起来，如：蔬菜一个容器，鲜肉一个容器
3. 不同的容器运行在不同的环境中(**TestRunner**，如：参数化测试``Parameterized.class``，套件测试``Suite.class``)，然后**TestRunner**就会将容器中的所有测试用例自动执行
4. 最后得出结果

